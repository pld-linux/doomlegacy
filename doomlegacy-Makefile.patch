--- doomlegacy/makefile.orig	Sun May  6 01:39:28 2001
+++ doomlegacy/makefile	Sat Jun 30 11:20:55 2001
@@ -366,7 +366,7 @@
 
 	# build a normal optimised version
 	ifdef PGCC
-		CFLAGS = $(OPTS) -mpentium -O6 -ffast-math -fomit-frame-pointer -fwritable-strings
+		CFLAGS = $(OPTS) $(OPTFLAGS) -ffast-math -fomit-frame-pointer -fwritable-strings
 		# -fgcse -fcse-follow-jumps -fcse-skip-blocks -frerun-cse-after-loop -ffunction-cse \
 		# -fexpensive-optimizations -fforce-mem -fstrength-reduce -fthread-jumps  \
 		# -fregmove -fschedule-insns -fschedule-insns2 -fmove-all-movables \
@@ -506,7 +506,7 @@
 
 #dll
 dll : $(O)/r_opengl.o $(O)/ogl_x11.o
-	$(CC) -mpentium -O6 -o $(BIN)/r_opengl.so -shared -nostartfiles $(O)/r_opengl.o $(O)/ogl_x11.o -L/usr/X11R6/lib -L/usr/local/lib -lGL -lX11 -lXext -lGLU -lm
+	$(CC) $(OPTFLAGS) -o $(BIN)/r_opengl.so -shared -nostartfiles $(O)/r_opengl.o $(O)/ogl_x11.o -L/usr/X11R6/lib -L/usr/local/lib -lGL -lX11 -lXext -lGLU -lm
 
 musserv:
 	@mkdir -p $(MUSSERV)/linux
@@ -520,7 +520,7 @@
 
 ifdef LINUX
 $(O)/r_opengl.o:	hardware/r_opengl/r_opengl.c hardware/r_opengl/r_opengl.h
-	$(CC) -mpentium -O6 -o $(O)/r_opengl.o	-DHWRENDER -DVID_X11 -DLINUX -DPOLL_POINTER -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/r_opengl.c
+	$(CC) $(OPTFLAGS) -o $(O)/r_opengl.o	-DHWRENDER -DVID_X11 -DLINUX -DPOLL_POINTER -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/r_opengl.c
 endif
 
 ifdef SDL
@@ -529,7 +529,7 @@
 endif
 
 $(O)/ogl_x11.o:  hardware/r_opengl/ogl_x11.c hardware/r_opengl/r_opengl.h
-	$(CC) -mpentium -O6 -o $(O)/ogl_x11.o -DHWRENDER -DVID_X11 -DLINUX -DPOLL_POINTER -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/ogl_x11.c
+	$(CC) $(OPTFLAGS) -o $(O)/ogl_x11.o -DHWRENDER -DVID_X11 -DLINUX -DPOLL_POINTER -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/ogl_x11.c
 
 
 #dependecy made by gcc itself ! (see makedep.mak for more)
--- doomlegacy/linux_x/sndserv/Makefile.orig	Sun Apr 30 21:50:38 2000
+++ doomlegacy/linux_x/sndserv/Makefile	Sat Jun 30 11:20:08 2001
@@ -19,7 +19,7 @@
 #
 
 CC=gcc
-CFLAGS=-O2 -m486 -Wall -DNORMALUNIX -DLINUX
+CFLAGS=$(OPTFLAGS) -Wall -DNORMALUNIX -DLINUX
 LDFLAGS=
 LIBS=-lm
 
--- doomlegacy/linux_x/musserv/Makefile.linux.orig	Sun Feb 27 01:42:12 2000
+++ doomlegacy/linux_x/musserv/Makefile.linux	Sat Jun 30 11:20:08 2001
@@ -3,7 +3,7 @@
 #
 
 CC	= gcc
-CFLAGS	= -I. -Wall -O2 -m486
+CFLAGS	= -I. -Wall $(OPTFLAGS)
 LDFLAGS	=
 #LDFLAGS	= -static
 
--- doomlegacy/tools/makefile.orig	Thu Jan 25 23:15:46 2001
+++ doomlegacy/tools/makefile	Sat Jun 30 11:20:08 2001
@@ -1,24 +1,24 @@
 
 default:    dircomp2.c
-	gcc -O6 -mpentium -Wall -s dircomp2.c -o dircomp2.exe
+	gcc $(OPTFLAGS) -Wall -s dircomp2.c -o dircomp2.exe
 
 asm:
-	gcc -O6 -mpentium -Wall -g dircomp2.c -o tmp.exe
+	gcc $(OPTFLAGS) -Wall -g dircomp2.c -o tmp.exe
 	objdump  -dS tmp.exe --debugging --no-show-raw-insn > dircomp2.s
 	del tmp.exe
 
 h2d:	 h2d.c
-	gcc -O6 -mpentium -Wall -s h2d.c -o h2d.exe
+	gcc $(OPTFLAGS) -Wall -s h2d.c -o h2d.exe
 
 dckconv:     dckconv.c
-	gcc -O6 -mpentium -Wall -s dckconv.c -o dckconv.exe
+	gcc $(OPTFLAGS) -Wall -s dckconv.c -o dckconv.exe
 
 dckconv2:     dckconv2.c
-	gcc -O6 -mpentium -Wall -s dckconv2.c -o dckconv2.exe
+	gcc $(OPTFLAGS) -Wall -s dckconv2.c -o dckconv2.exe
 
 dckcomp:     dckcomp.c
-	gcc -O6 -mpentium -Wall -s dckcomp.c -o dckcomp.exe
+	gcc $(OPTFLAGS) -Wall -s dckcomp.c -o dckcomp.exe
 
 convert:    convert.c
-	gcc -O6 -mpentium -Wall -s convert.c -o convert.exe
-	
+	gcc $(OPTFLAGS) -Wall -s convert.c -o convert.exe
+
