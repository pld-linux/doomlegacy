--- doomlegacy-1.32/doomlegacy/linux_x/i_video_xshm.c.orig	Fri May 11 14:54:59 2001
+++ doomlegacy-1.32/doomlegacy/linux_x/i_video_xshm.c	Sat Jun 30 10:55:58 2001
@@ -1896,7 +1896,7 @@
         
        rendermode = render_opengl;
        //dlptr = dlopen("./r_opengl.so",RTLD_LAZY);
-       dlptr = dlopen("./r_opengl.so",RTLD_NOW | RTLD_GLOBAL);
+       dlptr = dlopen("/usr/X11R6/lib/doomlegacy/r_opengl.so",RTLD_NOW | RTLD_GLOBAL);
        if(!dlptr) {
           fprintf(stderr,"Error opening r_opengl.so!\n%s\n",dlerror());
           rendermode = render_soft;
--- doomlegacy-1.32/doomlegacy/d_main.c.orig	Fri May 11 14:33:54 2001
+++ doomlegacy-1.32/doomlegacy/d_main.c	Sat Jun 30 10:54:48 2001
@@ -979,15 +979,7 @@
     // change to the directory where 'doom3.wad' is found
    I_LocateWad();
 #endif
-    doomwaddir = getenv("DOOMWADDIR");
-    if (!doomwaddir)
-    {
-        // get the current directory (possible problem on NT with "." as current dir)
-        if ( getcwd(pathtemp, _MAX_PATH) != NULL )
-            doomwaddir = pathtemp;
-        else
-            doomwaddir = ".";
-    }
+    doomwaddir = getenv("DOOMWADDIR") ? getenv("DOOMWADDIR") : "/usr/X11R6/share/doomlegacy";
         
 #ifdef __MACOS__
         // cwd is always "/" when app is dbl-clicked
--- doomlegacy-1.32/doomlegacy/linux_x/i_system.c.orig	Fri May 11 14:54:58 2001
+++ doomlegacy-1.32/doomlegacy/linux_x/i_system.c	Wed Jul 18 15:33:51 2001
@@ -119,10 +119,10 @@
 extern int             eventtail;
 
 // Locations for searching the doom3.wad
-#define DEFAULTWADLOCATION1 "/usr/local/games/legacy"
-#define DEFAULTWADLOCATION2 "/usr/games/legacy"
-#define DEFAULTSEARCHPATH1 "/usr/local"
-#define DEFAULTSEARCHPATH2 "/usr/games"
+#define DEFAULTWADLOCATION1 "/usr/X11R6/share/doomlegacy"
+#define DEFAULTWADLOCATION2 "/usr/share/games/doomlegacy"
+#define DEFAULTSEARCHPATH1 "/usr/share/games"
+#define DEFAULTSEARCHPATH2 "/usr/X11R6/share"
 #define WADKEYWORD "doom3.wad"
 
 // holds wad path
--- doomlegacy-1.32/doomlegacy/linux_x/musserv/musserver.c.orig	Fri May 11 14:55:26 2001
+++ doomlegacy-1.32/doomlegacy/linux_x/musserv/musserver.c	Wed Jul 18 15:35:53 2001
@@ -122,9 +122,7 @@
     ppid = getpid();
     if (verbose > 1) 
 	printf("pid %d %s\n", ppid, pproc);
-    waddir = getenv("DOOMWADDIR");
-    if (waddir == NULL)
-	waddir = ".";
+    waddir = getenv("DOOMWADDIR") ? getenv("DOOMWADDIR") : "/usr/X11R6/share/doomlegacy";
 
     while ((x = getopt(argc, argv, "acd:fhi:lmt:u:Vv")) != -1)
 	switch (x)
--- doomlegacy-1.32/doomlegacy/linux_x/musserv/readwad.c.orig	Fri May 11 14:55:27 2001
+++ doomlegacy-1.32/doomlegacy/linux_x/musserv/readwad.c	Wed Jul 18 15:37:09 2001
@@ -213,7 +213,7 @@
     FILE *fp;
 
     if (!(waddir = getenv("DOOMWADDIR")))
-        waddir = ".";
+        waddir = "/usr/X11R6/share/doomlegacy";
 
     wadfilename = malloc(2 + strlen(s) + strlen(waddir));
     if (*s != '/')
--- doomlegacy-1.32/doomlegacy/linux_x/searchp.c.orig	Fri May 11 14:54:59 2001
+++ doomlegacy-1.32/doomlegacy/linux_x/searchp.c	Wed Jul 18 15:46:11 2001
@@ -23,6 +23,11 @@
 	struct stat	s;
 	char		pb[2048];
 
+	strcpy(b,"/usr/X11R6/lib/doomlegacy/");
+	strcat(b,file);
+	if (stat(b, &s) == 0) {
+		return(b);
+	}
 	/* get PATH, if not set just return filename, might be in cwd */
         /* added "./" for current path 19990416 by Kin */
 	if ((path = getenv("PATH")) == NULL) {
